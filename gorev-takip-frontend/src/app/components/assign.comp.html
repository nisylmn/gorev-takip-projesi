<div class="header-section">
  <div class="header-content">
    <h1>ğŸ“‹ GÃ¶rev Atama Paneli</h1>
    <div class="header-actions">
      <button (click)="goToDashboard()" class="btn btn-secondary">â† Dashboard'a DÃ¶n</button>
      <button (click)="logout()" class="btn btn-logout">Ã‡Ä±kÄ±ÅŸ Yap</button>
    </div>
  </div>
</div>

<div class="main-container">
  <div class="users-panel">
    <h2>ğŸ‘¥ KullanÄ±cÄ±lar</h2>

    <div class="users-list">
      <div
        class="user-card"
        *ngFor="let user of allUsers"
        [ngClass]="{ selected: selectedUser?.id === user.id }"
        (click)="selectUser(user)"
      >
        <div class="user-avatar">
          {{ user.fullName.charAt(0).toUpperCase() }}
        </div>

        <div class="user-info">
          <div class="user-name">{{ user.fullName }}</div>
          <div class="user-email">{{ user.email }}</div>
        </div>
      </div>
    </div>
  </div>

  <div class="tasks-panel" *ngIf="selectedUser">
    <div class="selected-user-header">
      <h2>{{ selectedUser.fullName }} iÃ§in GÃ¶revler</h2>
      <span class="user-badge">{{ selectedUser.email }}</span>
    </div>

    <div class="assign-task-form">
      <h3>ğŸ†• Yeni GÃ¶rev Ata</h3>

      <div class="form-grid">
        <input
          type="text"
          [(ngModel)]="newTask.title"
          placeholder="GÃ¶rev BaÅŸlÄ±ÄŸÄ±"
          class="form-input"
        />

        <input
          type="text"
          [(ngModel)]="newTask.description"
          placeholder="AÃ§Ä±klama"
          class="form-input"
        />

        <input type="date" [(ngModel)]="newTask.startDate" [min]="today" />
        <input type="date" [(ngModel)]="newTask.endDate" [min]="newTask.startDate" />
      </div>

      <button (click)="assignTask()" class="btn btn-primary">â• GÃ¶revi Ata</button>
    </div>

    <div class="tasks-list">
      <h3>ğŸ“Œ Mevcut GÃ¶revler ({{ userTasks.length }})</h3>

      <div *ngIf="userTasks.length === 0" class="no-tasks">
        Bu kullanÄ±cÄ±ya henÃ¼z gÃ¶rev atanmamÄ±ÅŸ.
      </div>

      <div class="task-item" *ngFor="let task of userTasks">
        <div class="task-checkbox">
          <span *ngIf="task.isCompleted" class="badge-completed">âœ… TamamlandÄ±</span>
        </div>

        <div class="task-content" [ngClass]="{ completed: task.isCompleted }">
          <div class="task-title">{{ task.title }}</div>
          <div class="task-description">{{ task.description }}</div>
          <div class="task-dates">
            <span>ğŸ“… {{ task.startDate | date : 'dd/MM/yyyy' }}</span>
            <span>ğŸ {{ task.endDate | date : 'dd/MM/yyyy' }}</span>
          </div>
        </div>

        <div class="task-actions">
          <!-- ğŸ”¥ Silme butonu artÄ±k HERKES iÃ§in gÃ¶rÃ¼nÃ¼r -->
          <button (click)="deleteTask(task.id)" class="btn-delete">ğŸ—‘ï¸ Sil</button>
        </div>
      </div>
    </div>
  </div>

  <div class="stats-panel" *ngIf="selectedUser">
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-value">{{ stats.totalTasks }}</div>
        <div class="stat-label">Toplam GÃ¶rev</div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.completedTasks }}</div>
        <div class="stat-label">Tamamlanan</div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">â³</div>
        <div class="stat-value">{{ stats.pendingTasks }}</div>
        <div class="stat-label">Devam Eden</div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">ğŸ“ˆ</div>
        <div class="stat-value">%{{ stats.completionRate }}</div>
        <div class="stat-label">Tamamlanma</div>
      </div>
    </div>

    <div class="progress-section">
      <h3>Tamamlanma OranÄ±</h3>
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="stats.completionRate">
          <span class="progress-text">%{{ stats.completionRate }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="empty-state" *ngIf="!selectedUser && allUsers.length > 0">
  <div class="empty-icon">ğŸ‘ˆ</div>
  <h3>LÃ¼tfen bir kullanÄ±cÄ± seÃ§in</h3>
  <p>Sol taraftaki listeden bir kullanÄ±cÄ± seÃ§erek gÃ¶rev atayabilirsiniz.</p>
</div>
